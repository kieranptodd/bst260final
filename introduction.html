<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Dataset and Question</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Kieran Todd's Website</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Dataset and Question</h1>

</div>


<p><strong>Introduction</strong></p>
<p>The past several years have ushered in both excitement and dismay at
the influx of both protective and anti-transgender policies at the state
level. In 2020 alone, just about half of US states (e.g., 23 states)
introduced anti-transgender bills that spanned aspects of transgender
life, health and wellness related to exclusion from athletics,
implementing barriers to health care, and policies that limit the
decision-making ability for transgender youth and their families. Some
other states responded to transgender needs by expanding access to
health care, and codifying protections(ACLU, 2022). The political
landscape between 2016 and 2020 set the stage for transgender human
rights to be fought for and against in local, state, and federal
policy.</p>
<p>To investigate the implications of policy changes on the mental
health of transgender adults, this study will seek to estimate the
association between pro-transgender gender identity-specific policies
and the average number of bad mental health days in a 30 day period
attempting suicide based on a difference-in-differences analysis using
Behavioral Risk Surveillance Survey data; hypothesizing that state
gender identity policies that are in favor of transgender rights and
protections would be associated with reductions in the average number of
bad mental health days experienced in a state.</p>
<p><em>Data and sample</em></p>
<p>Policy data was obtained from the Movement Advancement Project’s
(MAP) aggregated database on LGBTQ-related polices and laws across the
United States. At the state level, for each of these policies, MAP
assigned a score, summed these scores, and created a “policy tally” for
each state. The policies underwent an evaluation process that scored
them based on their relevance to sexual orientation and gender (MAP,
2022). MAP monitors changes in the policy landscape for transgender
rights at the state-level and updates maps and “snapshots” of the types
of policies that are present or absent in a state, as well as shows the
progression of policy change over the years. Below are the changes in
the policy landscape for Arizona and Nevada between 2010 and 2020
related to gender identity</p>
<p>In 2010, both Arizona and Nevada had Gender Identity Tallies that
were “negative” – the lowest possible score for gender identity
protections given by MAP. In 2020, Arizona maintained its low score and
Nevada increased to the highest possible score at “High”. Data was
obtained on general mental health from the state BRFSS, a Centers for
Disease Control and Prevention- supported survey that “… collects state
data about U.S residents regarding their health-related risk behaviors,
chronic health conditions, and use of preventative services”. Data from
two states, Arizona and Nevada were used from the BRFSS Surveys from
2010 and 2020. These dates align with the state of LGBTQ policy as
compiled by MAP.</p>
<p>The primary analysis was conducted with the full population of US
adults. The analysis was focused on the full population of Arizona and
Nevada respondents for the following reasons: 1) not all states
collected information on gender identity and sexual orientation in 2010,
this included Arizona and Nevada, 2) the full population may include
individuals who are LGBTQ who may not have identified as such on the
survey even if given the option. 3) the existence (or non-existence) of
gender identity policies likely affect the number of individuals who
self-identify as sexual or gender minorities.</p>
<p><em>Read in Behavioral Risk Factor Surveillance System data from
2010</em></p>
<pre class="r"><code>brfss10 &lt;- read_xpt(&quot;/Users/kierantodd/Desktop/CDBRFS10.XPT&quot;,
                    col_select = c(`IYEAR`,`_STATE`, `MENTHLTH`)) %&gt;%
  as.data.table() %&gt;%
  setnames(old = c(&quot;IYEAR&quot;,&quot;_STATE&quot;, &quot;MENTHLTH&quot;), new = c(&quot;YEAR&quot;,&quot;STATE&quot;, &quot;MENTHLTH&quot;))</code></pre>
<p><em>Read in Behavioral Risk Factor Surveillance System data from
2020</em></p>
<pre class="r"><code>brfss20 &lt;- read_xpt(&quot;/Users/kierantodd/Desktop/LLCP2020.XPT&quot;,
                    col_select = c(`IYEAR`,`_STATE`, `MENTHLTH`)) %&gt;%
  as.data.table() %&gt;%
  setnames(old = c(&quot;IYEAR&quot;,&quot;_STATE&quot;, &quot;MENTHLTH&quot;), new = c(&quot;YEAR&quot;,&quot;STATE&quot;, &quot;MENTHLTH&quot;))</code></pre>
<p><em>Combine BRFSS 2010 and BRFSS 2020 mental health data by
State</em></p>
<pre class="r"><code>brfss_all &lt;- rbindlist(list(brfss10, brfss20), use.names = T)
brfss_all &lt;- na.omit(brfss_all)</code></pre>
<p><em>Filter by Nevada and Arizona for the simple 2x2
difference-in-differences model</em></p>
<pre class="r"><code>brfss_all &lt;- brfss_all |&gt; 
  filter(STATE %in% c(&quot;5&quot;, &quot;32&quot;)) |&gt;
  select(STATE, YEAR, MENTHLTH) %&gt;%
  mutate(outcome = case_when(
    MENTHLTH == 88 ~ 0,
    MENTHLTH == 77 ~ NA_real_,
    MENTHLTH == 99 ~ NA_real_,
    TRUE ~ MENTHLTH))

na.omit(brfss_all)</code></pre>
<pre><code>##        STATE YEAR MENTHLTH outcome
##     1:     5 2010       88       0
##     2:     5 2010       88       0
##     3:     5 2010       88       0
##     4:     5 2010       88       0
##     5:     5 2010       88       0
##    ---                            
## 15373:    32 2020        1       1
## 15374:    32 2020       88       0
## 15375:    32 2020       88       0
## 15376:    32 2020       88       0
## 15377:    32 2020       88       0</code></pre>
<p><em>Rename States by their FIPS codes to the State
Abbreviations</em></p>
<pre class="r"><code>brfss_all$STATE = ifelse(brfss_all$&quot;STATE&quot; == 5,&quot;Arizona&quot;,&quot;Nevada&quot;)</code></pre>
<p><em>Further clean data so that only 2010 and 2020 interview dates
exist, also omit any rows that have no values</em></p>
<pre class="r"><code>brfss_analysis &lt;- brfss_all %&gt;% filter(YEAR %in% c(2010,2020))
brfss_analysis &lt;- na.omit(brfss_analysis)</code></pre>
<p><em>Plotting a density plot of mental health bad days in the pre
period</em></p>
<pre class="r"><code>ggplot(data=brfss_analysis[brfss_analysis$YEAR==2010], aes(x=outcome, group=as.factor(STATE)))+
  scale_x_continuous(breaks = seq(from = 0, to = 30, by = 5)) +
  geom_density( aes( fill=as.factor(STATE) ), alpha=0.4 ) +
  theme_bw() + xlab(&quot;Number of Days&quot;) +
  ylab(&quot;&quot;) + guides(fill=guide_legend(title=&quot;State&quot;)) +
  ggtitle(&quot;Number of Bad Mental Health Days (in a month) in 2010&quot;)</code></pre>
<p><img src="introduction_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Figure 1 depicts a density plot of the number of bad mental health
days in the pre-treatment period by whether or not a state eventually
receives treatment (i.e., Arizona relative to Nevada). These overlaid
density plots are relatively like each other in 2010.</p>
<p><em>Plotting a density plot of mental health bad days in the post
period (2020)</em></p>
<pre class="r"><code>ggplot(data=brfss_analysis[brfss_analysis$YEAR==2020], aes(x=outcome, group=as.factor(STATE)))+
  scale_x_continuous(breaks = seq(from = 0, to = 30, by = 5)) +
  geom_density( aes( fill=as.factor(STATE) ), alpha=0.4 ) +
  theme_bw() + xlab(&quot;Number of Days&quot;) +
  ylab(&quot;&quot;) + guides(fill=guide_legend(title=&quot;State&quot;)) +
  ggtitle(&quot;Number of Bad Mental Health Days (in a month) in 2020&quot;)</code></pre>
<p><img src="introduction_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Figure 2 depicts the density of the outcome in the post-treatment
period again disaggregated by treatment status. The plots differ more
from each other in 2020 than they did in 2010.</p>
<p><em>Creating a plot to average mental health outcome between 2010 and
2020</em></p>
<pre class="r"><code>agg &lt;- ddply(brfss_analysis,.(YEAR, STATE),summarize, val = mean(outcome))

ggplot( data=agg, aes(x=as.factor(YEAR), y=val, group=STATE,
                      color=as.factor(STATE))) +
  geom_line(lwd=1.5)+
  theme_bw() + geom_point(size=4) +
  ylab(&quot;Bad Mental Health Days&quot;) + xlab(&quot;Year&quot;) +
  guides(color=guide_legend(title=&quot;States&quot;)) +
  ggtitle(&quot;Mental Health Trajectories for Arizona v. Nevada&quot;)</code></pre>
<pre><code>## Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
## ℹ Please use `linewidth` instead.</code></pre>
<p><img src="introduction_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
